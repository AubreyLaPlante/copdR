<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>howto_copdr • copdr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="howto_copdr">
<meta property="og:description" content="copdr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">copdr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/howto_copdr.html">howto_copdr</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>howto_copdr</h1>
            
      
      
      <div class="hidden name"><code>howto_copdr.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">copdr</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction-to-cumulative-offset-probability-distribution-in-r-copdr">Introduction to Cumulative Offset Probability Distribution in R
(copdr)<a class="anchor" aria-label="anchor" href="#introduction-to-cumulative-offset-probability-distribution-in-r-copdr"></a>
</h2>
<p>This code is meant to import probability distribution functions
(PDFs), i.e. Gaussian curves, and combine them in a modicum of ways for
the user, based on several filters to take out the noisy PDFs or PDFs
with high uncertainties (i.e. large standard deviations, high
coefficient of variation, etc). These PDFs are produced from LaDiCaoz, a
Matlab program that allows you to ‘backslip’ offset on a fault from
digital elevation models (DEMs) or digital surface models (DSMs). It is
a lot of acronyms, I know. I will simplify this description in a future
version.</p>
</div>
<div class="section level2">
<h2 id="load-in-data">1. Load in data<a class="anchor" aria-label="anchor" href="#load-in-data"></a>
</h2>
<p>First, you need to make sure that the dataset is in a folder in your
working directory. The first part of the code does the following:</p>
<ol style="list-style-type: decimal">
<li>Generates a reference vector of folder names, from the files in the
dataset folder. Currently, this code only works to process .mat files.
After running this first section of code, you will be prompted to enter
the name of the folder containing all the .mat files. This does NOT need
quotations around it.</li>
<li>Imports the metadata from a reference .csv file. See “example.csv”
or “example.xlsx” for how this reference metadata should be
formatted.</li>
</ol>
<div class="section level3">
<h3 id="user-defined-inputs">User-defined inputs<a class="anchor" aria-label="anchor" href="#user-defined-inputs"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#First, set the directory where all your data exist.</span></span>
<span><span class="va">directory</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"copdr"</span><span class="op">)</span></span>
<span><span class="va">folder_name</span> <span class="op">=</span> <span class="st">"example_mat"</span></span>
<span><span class="va">csv_name</span> <span class="op">=</span> <span class="st">"example.csv"</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># list.mat() takes the folder ' example_mat '  in a directory and lists all the file names with the file format '.mat'</span></span>
<span><span class="va">backslip_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/list.mat.html">list.mat</a></span><span class="op">(</span><span class="va">directory</span>, <span class="va">folder_name</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#create a list containing three dataframes, including 1. lateral, 2. vertical, 3. total offset</span></span>
<span><span class="va">backslip_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/matrix.mat.html">matrix.mat</a></span><span class="op">(</span><span class="va">directory</span>,<span class="va">folder_name</span>,<span class="va">backslip_names</span><span class="op">)</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> `` -&gt; `...1`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> `` -&gt; `...2`</span></span>
<span><span class="co">#&gt;   |                                                          |                                                  |   0%  |                                                          |                                                  |   1%  |                                                          |=                                                 |   1%  |                                                          |=                                                 |   2%  |                                                          |=                                                 |   3%  |                                                          |==                                                |   3%  |                                                          |==                                                |   4%  |                                                          |==                                                |   5%  |                                                          |===                                               |   5%  |                                                          |===                                               |   6%  |                                                          |===                                               |   7%  |                                                          |====                                              |   7%  |                                                          |====                                              |   8%  |                                                          |====                                              |   9%  |                                                          |=====                                             |   9%  |                                                          |=====                                             |  10%  |                                                          |=====                                             |  11%  |                                                          |======                                            |  11%  |                                                          |======                                            |  12%  |                                                          |======                                            |  13%  |                                                          |=======                                           |  13%  |                                                          |=======                                           |  14%  |                                                          |=======                                           |  15%  |                                                          |========                                          |  15%  |                                                          |========                                          |  16%  |                                                          |========                                          |  17%  |                                                          |=========                                         |  17%  |                                                          |=========                                         |  18%  |                                                          |=========                                         |  19%  |                                                          |==========                                        |  19%  |                                                          |==========                                        |  20%  |                                                          |==========                                        |  21%  |                                                          |===========                                       |  21%  |                                                          |===========                                       |  22%  |                                                          |===========                                       |  23%  |                                                          |============                                      |  23%  |                                                          |============                                      |  24%  |                                                          |============                                      |  25%  |                                                          |=============                                     |  25%  |                                                          |=============                                     |  26%  |                                                          |=============                                     |  27%  |                                                          |==============                                    |  27%  |                                                          |==============                                    |  28%  |                                                          |==============                                    |  29%  |                                                          |===============                                   |  29%  |                                                          |===============                                   |  30%  |                                                          |===============                                   |  31%  |                                                          |================                                  |  31%  |                                                          |================                                  |  32%  |                                                          |================                                  |  33%  |                                                          |=================                                 |  33%  |                                                          |=================                                 |  34%  |                                                          |=================                                 |  35%  |                                                          |==================                                |  35%  |                                                          |==================                                |  36%  |                                                          |==================                                |  37%  |                                                          |===================                               |  37%  |                                                          |===================                               |  38%  |                                                          |===================                               |  39%  |                                                          |====================                              |  39%  |                                                          |====================                              |  40%  |                                                          |====================                              |  41%  |                                                          |=====================                             |  41%  |                                                          |=====================                             |  42%  |                                                          |=====================                             |  43%  |                                                          |======================                            |  43%  |                                                          |======================                            |  44%  |                                                          |======================                            |  45%  |                                                          |=======================                           |  45%  |                                                          |=======================                           |  46%  |                                                          |=======================                           |  47%  |                                                          |========================                          |  47%  |                                                          |========================                          |  48%  |                                                          |========================                          |  49%  |                                                          |=========================                         |  49%  |                                                          |=========================                         |  50%  |                                                          |=========================                         |  51%  |                                                          |==========================                        |  51%  |                                                          |==========================                        |  52%  |                                                          |==========================                        |  53%  |                                                          |===========================                       |  53%  |                                                          |===========================                       |  54%  |                                                          |===========================                       |  55%  |                                                          |============================                      |  55%  |                                                          |============================                      |  56%  |                                                          |============================                      |  57%  |                                                          |=============================                     |  57%  |                                                          |=============================                     |  58%  |                                                          |=============================                     |  59%  |                                                          |==============================                    |  59%  |                                                          |==============================                    |  60%  |                                                          |==============================                    |  61%  |                                                          |===============================                   |  61%  |                                                          |===============================                   |  62%  |                                                          |===============================                   |  63%  |                                                          |================================                  |  63%  |                                                          |================================                  |  64%  |                                                          |================================                  |  65%  |                                                          |=================================                 |  65%  |                                                          |=================================                 |  66%  |                                                          |=================================                 |  67%  |                                                          |==================================                |  67%  |                                                          |==================================                |  68%  |                                                          |==================================                |  69%  |                                                          |===================================               |  69%  |                                                          |===================================               |  70%  |                                                          |===================================               |  71%  |                                                          |====================================              |  71%  |                                                          |====================================              |  72%  |                                                          |====================================              |  73%  |                                                          |=====================================             |  73%  |                                                          |=====================================             |  74%  |                                                          |=====================================             |  75%  |                                                          |======================================            |  75%  |                                                          |======================================            |  76%  |                                                          |======================================            |  77%  |                                                          |=======================================           |  77%  |                                                          |=======================================           |  78%  |                                                          |=======================================           |  79%  |                                                          |========================================          |  79%  |                                                          |========================================          |  80%  |                                                          |========================================          |  81%  |                                                          |=========================================         |  81%  |                                                          |=========================================         |  82%  |                                                          |=========================================         |  83%  |                                                          |==========================================        |  83%  |                                                          |==========================================        |  84%  |                                                          |==========================================        |  85%  |                                                          |===========================================       |  85%  |                                                          |===========================================       |  86%  |                                                          |===========================================       |  87%  |                                                          |============================================      |  87%  |                                                          |============================================      |  88%  |                                                          |============================================      |  89%  |                                                          |=============================================     |  89%  |                                                          |=============================================     |  90%  |                                                          |=============================================     |  91%  |                                                          |==============================================    |  91%  |                                                          |==============================================    |  92%  |                                                          |==============================================    |  93%  |                                                          |===============================================   |  93%  |                                                          |===============================================   |  94%  |                                                          |===============================================   |  95%  |                                                          |================================================  |  95%  |                                                          |================================================  |  96%  |                                                          |================================================  |  97%  |                                                          |================================================= |  97%  |                                                          |================================================= |  98%  |                                                          |================================================= |  99%  |                                                          |==================================================|  99%  |                                                          |==================================================| 100%</span></span>
<span></span>
<span><span class="co">#load in your reference CSV. See example table "example.csv" for how your table should be formatted</span></span>
<span><span class="va">backslip_csv</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">directory</span>,<span class="va">csv_name</span><span class="op">)</span>, show_col_types <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co">##################</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="data-pre-processing">2. Data pre-processing<a class="anchor" aria-label="anchor" href="#data-pre-processing"></a>
</h3>
<p>2.1. Visualize raw data</p>
<p>This code plots your data on a default coordinate axis, to check that
the data loaded in right.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## DO NOT EDIT ##</span></span>
<span></span>
<span><span class="co">#prep data for plotting</span></span>
<span><span class="va">raw_lat_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simplify4plot.html">simplify4plot</a></span><span class="op">(</span><span class="va">backslip_data</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="st">"lateral"</span><span class="op">)</span></span>
<span><span class="va">raw_vert_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simplify4plot.html">simplify4plot</a></span><span class="op">(</span><span class="va">backslip_data</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>, <span class="st">"vertical"</span><span class="op">)</span></span>
<span><span class="va">raw_total_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simplify4plot.html">simplify4plot</a></span><span class="op">(</span><span class="va">backslip_data</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span>, <span class="st">"total"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot raw data</span></span>
<span><span class="fu"><a href="../reference/plotMat.html">plotMat</a></span><span class="op">(</span><span class="va">raw_lat_data</span>,<span class="st">"lateral"</span><span class="op">)</span></span></code></pre></div>
<p><img src="howto_copdr_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotMat.html">plotMat</a></span><span class="op">(</span><span class="va">raw_vert_data</span>,<span class="st">"vertical"</span><span class="op">)</span></span></code></pre></div>
<p><img src="howto_copdr_files/figure-html/unnamed-chunk-4-2.png" width="700"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotMat.html">plotMat</a></span><span class="op">(</span><span class="va">raw_total_data</span>,<span class="st">"total"</span><span class="op">)</span></span></code></pre></div>
<p><img src="howto_copdr_files/figure-html/unnamed-chunk-4-3.png" width="700"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">##################</span></span></code></pre></div>
<p>2.2 Clip raw data and plot</p>
<p>Use the graphs from 2.1 to clip your dataset.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## USER-DEFINED LIMITS ##</span></span>
<span><span class="va">lat_limits</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>     lat_x_min <span class="op">=</span> <span class="op">-</span><span class="fl">5</span>,</span>
<span>     lat_x_max <span class="op">=</span> <span class="fl">0</span>,</span>
<span>     lat_y_min <span class="op">=</span> <span class="fl">0</span>,</span>
<span>     lat_y_max <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">vert_limits</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>     vert_x_min <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>,</span>
<span>     vert_x_max <span class="op">=</span> <span class="fl">0</span>,</span>
<span>     vert_y_min <span class="op">=</span> <span class="fl">0</span>,</span>
<span>     vert_y_max <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">total_limits</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>     total_x_min <span class="op">=</span> <span class="fl">0</span>,</span>
<span>     total_x_max <span class="op">=</span> <span class="fl">5</span>,</span>
<span>     total_y_min <span class="op">=</span> <span class="fl">0</span>,</span>
<span>     total_y_max <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span>  </span>
<span></span>
<span><span class="co">#######################</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="co">## DO NOT EDIT ##</span></span>
<span></span>
<span><span class="co">#clip x limits of data</span></span>
<span><span class="va">backslip_data_clip</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>     backslip_lat <span class="op">=</span> <span class="fu"><a href="../reference/data.clip.html">data.clip</a></span><span class="op">(</span><span class="va">backslip_data</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,<span class="st">"lateral"</span>,<span class="va">lat_limits</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,<span class="va">lat_limits</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>     backslip_vert <span class="op">=</span> <span class="fu"><a href="../reference/data.clip.html">data.clip</a></span><span class="op">(</span><span class="va">backslip_data</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>,<span class="st">"vertical"</span>,<span class="va">vert_limits</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,<span class="va">vert_limits</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>     backslip_tot <span class="op">=</span> <span class="fu"><a href="../reference/data.clip.html">data.clip</a></span><span class="op">(</span><span class="va">backslip_data</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span>,<span class="st">"total"</span>,<span class="va">total_limits</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,<span class="va">total_limits</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot clipped data</span></span>
<span><span class="fu"><a href="../reference/plotMat.html">plotMat</a></span><span class="op">(</span><span class="fu"><a href="../reference/simplify4plot.html">simplify4plot</a></span><span class="op">(</span><span class="va">backslip_data_clip</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="st">"lateral"</span><span class="op">)</span>,<span class="st">"lateral"</span>,</span>
<span>        <span class="va">lat_limits</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,<span class="va">lat_limits</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>,<span class="va">lat_limits</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span>,<span class="va">lat_limits</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 11 rows containing non-finite outside the scale range</span></span>
<span><span class="co">#&gt; (`stat_align()`).</span></span></code></pre></div>
<p><img src="howto_copdr_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotMat.html">plotMat</a></span><span class="op">(</span><span class="fu"><a href="../reference/simplify4plot.html">simplify4plot</a></span><span class="op">(</span><span class="va">backslip_data_clip</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>, <span class="st">"vertical"</span><span class="op">)</span>,<span class="st">"vertical"</span>,</span>
<span>        <span class="va">vert_limits</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,<span class="va">vert_limits</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>, <span class="va">vert_limits</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span>,<span class="va">vert_limits</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p><img src="howto_copdr_files/figure-html/unnamed-chunk-5-2.png" width="700"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotMat.html">plotMat</a></span><span class="op">(</span><span class="fu"><a href="../reference/simplify4plot.html">simplify4plot</a></span><span class="op">(</span><span class="va">backslip_data_clip</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span>, <span class="st">"total"</span><span class="op">)</span>,<span class="st">"total"</span>,</span>
<span>        <span class="va">total_limits</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,<span class="va">total_limits</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>,<span class="va">total_limits</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span>,<span class="va">total_limits</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 10 rows containing non-finite outside the scale range</span></span>
<span><span class="co">#&gt; (`stat_align()`).</span></span></code></pre></div>
<p><img src="howto_copdr_files/figure-html/unnamed-chunk-5-3.png" width="700"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span></span>
<span><span class="co">##################</span></span></code></pre></div>
<p>2.3 Confidence Scaling</p>
<p>This code scales each PDF by a confidence value. These confidence
values are specific to the dataset, where 1 is the maximum confidence
and your largest value is the lowest confidence. In this dataset, 3 is
the lowest confidence. The code is set up to accommodate any confidence
scale (1 to 3, 1 to 5, 1 to 10, etc). If your confidence values are
flipped in the reference metadata, such that 1 is the lowest confidence
value, you will need to invert the values in your metadata.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## USER DEFINED INPUT ##</span></span>
<span><span class="co">#column of csv table corresponding to confidence values</span></span>
<span><span class="va">confidence_column</span> <span class="op">=</span> <span class="fl">9</span></span>
<span><span class="va">N_observations</span> <span class="op">=</span> <span class="fl">205</span></span>
<span><span class="co">########################</span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span><span class="co">## DO NOT EDIT ##</span></span>
<span></span>
<span><span class="co">#scale the data by confidence values and put in a new list</span></span>
<span><span class="va">backslip_data_Cscale</span> <span class="op">&lt;-</span> <span class="va">backslip_data</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">{</span></span>
<span>     <span class="va">backslip_data_Cscale</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/conf.scale.html">conf.scale</a></span><span class="op">(</span><span class="va">backslip_data_clip</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span>,<span class="va">backslip_csv</span>, <span class="va">confidence_column</span>, <span class="va">N_observations</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># plot confidence-scaled data</span></span>
<span><span class="fu"><a href="../reference/plotMat.html">plotMat</a></span><span class="op">(</span><span class="fu"><a href="../reference/simplify4plot.html">simplify4plot</a></span><span class="op">(</span><span class="va">backslip_data_Cscale</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="st">"lateral"</span><span class="op">)</span>,<span class="st">"lateral"</span>,</span>
<span>        <span class="va">lat_limits</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,<span class="va">lat_limits</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>,<span class="va">lat_limits</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span>,<span class="va">lat_limits</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 11 rows containing non-finite outside the scale range</span></span>
<span><span class="co">#&gt; (`stat_align()`).</span></span></code></pre></div>
<p><img src="howto_copdr_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotMat.html">plotMat</a></span><span class="op">(</span><span class="fu"><a href="../reference/simplify4plot.html">simplify4plot</a></span><span class="op">(</span><span class="va">backslip_data_Cscale</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>, <span class="st">"vertical"</span><span class="op">)</span>,<span class="st">"vertical"</span>,</span>
<span>        <span class="va">vert_limits</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,<span class="va">vert_limits</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>, <span class="va">vert_limits</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span>,<span class="va">vert_limits</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p><img src="howto_copdr_files/figure-html/unnamed-chunk-6-2.png" width="700"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotMat.html">plotMat</a></span><span class="op">(</span><span class="fu"><a href="../reference/simplify4plot.html">simplify4plot</a></span><span class="op">(</span><span class="va">backslip_data_Cscale</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span>, <span class="st">"total"</span><span class="op">)</span>,<span class="st">"total"</span>,</span>
<span>        <span class="va">total_limits</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,<span class="va">total_limits</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>,<span class="va">total_limits</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span>,<span class="va">total_limits</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 10 rows containing non-finite outside the scale range</span></span>
<span><span class="co">#&gt; (`stat_align()`).</span></span></code></pre></div>
<p><img src="howto_copdr_files/figure-html/unnamed-chunk-6-3.png" width="700"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##################</span></span></code></pre></div>
<p>2.4 Coefficient of variation (COV) calculation</p>
<p>#the master reference CSV “backslip_csv” should have 4-6 columns for
displacement statistics # 1. lateral mean, 2. lateral standard
deviation, 3. vertical mean, 4. vertical standard deviation, # 5. total
mean, 6. total standard devation # for all offset sites</p>
<p>#inputs will need to be the columns of offset data</p>
<p>#the following code calculates the coefficient of variation, #which
is the standard deviation divided by the mean #I used lateral in my
example because in the example data, #vertical displacement is poorly
resolved and small magnitude</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span></span>
<span><span class="co">## USER DEFINED INPUT ##</span></span>
<span><span class="co"># these are the column numbers corresponding to this data in the reference csv</span></span>
<span><span class="va">lat_mean</span> <span class="op">=</span> <span class="fl">13</span></span>
<span><span class="va">lat_stdev</span> <span class="op">=</span> <span class="fl">14</span></span>
<span><span class="va">vert_mean</span> <span class="op">=</span> <span class="fl">15</span></span>
<span><span class="va">vert_stdev</span> <span class="op">=</span> <span class="fl">16</span></span>
<span><span class="va">total_mean</span> <span class="op">=</span> <span class="fl">17</span></span>
<span><span class="va">total_stdev</span> <span class="op">=</span> <span class="fl">18</span></span>
<span></span>
<span><span class="co">########################</span></span>
<span>     </span>
<span></span>
<span></span>
<span><span class="co">## DO NOT EDIT ##</span></span>
<span></span>
<span><span class="va">backslip_csv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc.cov.html">calc.cov</a></span><span class="op">(</span><span class="va">backslip_csv</span>,<span class="st">"lateral"</span>, <span class="va">lat_mean</span>, <span class="va">lat_stdev</span><span class="op">)</span></span>
<span><span class="va">backslip_csv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc.cov.html">calc.cov</a></span><span class="op">(</span><span class="va">backslip_csv</span>,<span class="st">"vertical"</span>,<span class="va">vert_mean</span>, <span class="va">vert_stdev</span><span class="op">)</span></span>
<span><span class="va">backslip_csv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc.cov.html">calc.cov</a></span><span class="op">(</span><span class="va">backslip_csv</span>,<span class="st">"total"</span>,<span class="va">total_mean</span>, <span class="va">total_stdev</span><span class="op">)</span></span>
<span><span class="co">########################</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="filters">3. Filters<a class="anchor" aria-label="anchor" href="#filters"></a>
</h3>
</div>
</div>
<div class="section level2">
<h2 id="these-filters-will-work-to-clip-master-data-matrices-to-include-only-file-names">these filters will work to clip master data matrices to include only
file names<a class="anchor" aria-label="anchor" href="#these-filters-will-work-to-clip-master-data-matrices-to-include-only-file-names"></a>
</h2>
</div>
<div class="section level2">
<h2 id="that-meet-a-set-of-criteria">that meet a set of criteria<a class="anchor" aria-label="anchor" href="#that-meet-a-set-of-criteria"></a>
</h2>
</div>
<div class="section level2">
<h2 id="users-will-define-these-criteria-and-the-code-will-filter-through-the-csv-and-data-matrices-to-remove">users will define these criteria and the code will filter through
the CSV and data matrices to remove<a class="anchor" aria-label="anchor" href="#users-will-define-these-criteria-and-the-code-will-filter-through-the-csv-and-data-matrices-to-remove"></a>
</h2>
</div>
<div class="section level2">
<h2 id="pdfs-that-do-not-fit-these-criteria">PDFs that do not fit these criteria<a class="anchor" aria-label="anchor" href="#pdfs-that-do-not-fit-these-criteria"></a>
</h2>
</div>
<div class="section level2">
<h2 id="each-filter-will-essentially-clip-the-data-and-produce-an-output-of-pdfs-that-can-be-plotted-which-can-then-be-fed-into-any-of-the-other-filters">Each filter will essentially clip the data and produce an output of
PDFs that can be plotted, which can then be fed into any of the other
filters<a class="anchor" aria-label="anchor" href="#each-filter-will-essentially-clip-the-data-and-produce-an-output-of-pdfs-that-can-be-plotted-which-can-then-be-fed-into-any-of-the-other-filters"></a>
</h2>
<p>3.1 COV filters</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#these are the COV values you want to filter for</span></span>
<span><span class="va">COV_filter_vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">.10</span>,<span class="fl">.30</span>, by<span class="op">=</span><span class="fl">0.05</span><span class="op">)</span> </span>
<span></span>
<span></span>
<span></span>
<span><span class="co">## DO NOT EDIT ##</span></span>
<span><span class="co"># this creates reference data files for the offset_IDs and the corresponding COV values</span></span>
<span><span class="va">lat_covREF</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_covREF.html">filter_covREF</a></span><span class="op">(</span><span class="va">backslip_csv</span>,<span class="fl">1</span>,<span class="st">"lateral"</span>,<span class="va">COV_filter_vals</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Using one column matrices in `filter()` was deprecated in dplyr 1.1.0.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Please use one dimensional logical vectors instead.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> The deprecated feature was likely used in the <span style="color: #0000BB;">copdr</span> package.</span></span>
<span><span class="co">#&gt;   Please report the issue to the authors.</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">This warning is displayed once every 8 hours.</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">generated.</span></span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> `XY_stdev` -&gt; `XY_stdev...2`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> `XY_stdev` -&gt; `XY_stdev...3`</span></span>
<span><span class="va">vert_covREF</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_covREF.html">filter_covREF</a></span><span class="op">(</span><span class="va">backslip_csv</span>,<span class="fl">1</span>,<span class="st">"vertical"</span>,<span class="va">COV_filter_vals</span><span class="op">)</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> `Z_stdev` -&gt; `Z_stdev...2`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> `Z_stdev` -&gt; `Z_stdev...3`</span></span>
<span><span class="va">total_covREF</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_covREF.html">filter_covREF</a></span><span class="op">(</span><span class="va">backslip_csv</span>,<span class="fl">1</span>,<span class="st">"total"</span>,<span class="va">COV_filter_vals</span><span class="op">)</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> `XY_stdev` -&gt; `XY_stdev...2`</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> `XY_stdev` -&gt; `XY_stdev...3`</span></span>
<span></span>
<span><span class="co">### this filters the input datatable 'backslip_data' by the filtered COV reference files created using filter.covREF</span></span>
<span><span class="va">lat_cov2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_covDAT.html">filter_covDAT</a></span><span class="op">(</span><span class="va">backslip_csv</span>,<span class="fl">1</span>,<span class="st">"lateral"</span>,<span class="va">COV_filter_vals</span>,<span class="va">lat_covREF</span>,<span class="va">backslip_data_Cscale</span><span class="op">)</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> `` -&gt; `...1`</span></span>
<span><span class="va">vert_cov2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_covDAT.html">filter_covDAT</a></span><span class="op">(</span><span class="va">backslip_csv</span>,<span class="fl">1</span>,<span class="st">"vertical"</span>,<span class="va">COV_filter_vals</span>,<span class="va">vert_covREF</span>,<span class="va">backslip_data_Cscale</span><span class="op">)</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> `` -&gt; `...1`</span></span>
<span><span class="va">total_cov2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_covDAT.html">filter_covDAT</a></span><span class="op">(</span><span class="va">backslip_csv</span>,<span class="fl">1</span>,<span class="st">"total"</span>,<span class="va">COV_filter_vals</span>,<span class="va">total_covREF</span>,<span class="va">backslip_data_Cscale</span><span class="op">)</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; New names:</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> `` -&gt; `...1`</span></span>
<span><span class="co">########################</span></span>
<span></span>
<span><span class="co"># plot confidence-scaled data</span></span>
<span><span class="fu"><a href="../reference/plotMatSum.html">plotMatSum</a></span><span class="op">(</span><span class="va">lat_cov2</span><span class="op">[[</span><span class="fl">5</span><span class="op">]</span><span class="op">]</span> ,<span class="st">"lateral"</span>, <span class="va">lat_limits</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="va">lat_limits</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p><img src="howto_copdr_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotMatSum.html">plotMatSum</a></span><span class="op">(</span><span class="va">vert_cov2</span><span class="op">[[</span><span class="fl">5</span><span class="op">]</span><span class="op">]</span> ,<span class="st">"vertical"</span>, <span class="va">vert_limits</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,<span class="va">vert_limits</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p><img src="howto_copdr_files/figure-html/unnamed-chunk-8-2.png" width="700"></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotMatSum.html">plotMatSum</a></span><span class="op">(</span><span class="va">total_cov2</span><span class="op">[[</span><span class="fl">5</span><span class="op">]</span><span class="op">]</span> ,<span class="st">"total"</span>, <span class="va">total_limits</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,<span class="va">total_limits</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p><img src="howto_copdr_files/figure-html/unnamed-chunk-8-3.png" width="700"></p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##################</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Aubrey LaPlante.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
